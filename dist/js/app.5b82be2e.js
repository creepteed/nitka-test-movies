(function(t){function e(e){for(var i,a,r=e[0],c=e[1],l=e[2],d=0,_=[];d<r.length;d++)a=r[d],n[a]&&_.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(_.length)_.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={app:0},o=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("64a9"),n=s.n(i);n.a},"1cf9":function(t,e,s){"use strict";var i=s("c198"),n=s.n(i);n.a},4871:function(t,e,s){},5399:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("MovieTheatre"),s("transition",{attrs:{name:"fade"}},[t.modal_trigger?s("MessageModal",{attrs:{message:t.modal_message}}):t._e()],1)],1)},o=[],a=s("cebc"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mv-wrap"},[s("transition",{attrs:{name:"fade"}},[t.selected_sits_list.length?s("OrderStatusModal"):t._e()],1),s("div",{staticClass:"mv-wrap--iner"},[s("div",{staticClass:"screen"}),t._l(t.sits_grid,function(t,e){return s("Row",{key:e,attrs:{position:e,row:t}})})],2)],1)},c=[],l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row-wrap"},[t._l(t.row,function(e,i){return s("Sit",{key:i,attrs:{position:i,status:e,row:t.position}})}),s("div",{staticClass:"pos position-left"},[t._v(t._s(t.position+1))]),s("div",{staticClass:"pos position-right"},[t._v(t._s(t.position+1))])],2)},u=[],d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sit-wrap",class:{selected:t.status===t.CONFIG.status_code.selected,booked:t.status===t.CONFIG.status_code.booked},on:{click:t.acitvateHandler}},[t._v("\n  "+t._s(t.position+1)+"\n")])},_=[],f={status_code:{free:100,selected:101,booked:102},rows:10,sits:10,random_seed:{enable:!0,sits_to_seed:10}},p={name:"Sit",props:["position","row","status"],data:function(){return{CONFIG:f}},mounted:function(){},methods:{acitvateHandler:function(){var t=this;this.$store.dispatch("toggleSitSelection",{row:this.row,sit:this.position,update:function(){t.$parent.$forceUpdate()}})}}},v=p,m=(s("b334"),s("2877")),g=Object(m["a"])(v,d,_,!1,null,"63ff98c6",null);g.options.__file="Sit.vue";var b=g.exports,h={name:"Row",components:{Sit:b},props:["position","row"]},w=h,O=(s("7491"),Object(m["a"])(w,l,u,!1,null,"390a8184",null));O.options.__file="Row.vue";var M=O.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"osm-wrap"},[t._l(t.selected_sits_list,function(t,e){return s("OrderCard",{key:e,attrs:{data:t}})}),t.selected_sits_list.length?s("div",{staticClass:"summary"},[t._v("\n    Сумма заказа "+t._s(100*t.selected_sits_list.length)+" руб\n  ")]):t._e(),s("button",{staticClass:"clear-button",on:{click:function(e){t.sitHandler(e,"clean")}}},[t._v("Отмена")]),s("button",{staticClass:"clear-button",on:{click:function(e){t.sitHandler(e,"book")}}},[t._v("Купить")])],2)},j=[],C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"oc-wrap"},[t._v("\n  Ряд "),s("span",[t._v(t._s(t.data.row+1))]),t._v(" место "),s("span",[t._v(t._s(t.data.sit+1))]),t._v(" .\n")])},y=[],k={name:"OrderCard",props:["data"],mounted:function(){console.log(this.data)}},x=k,$=(s("8d95"),Object(m["a"])(x,C,y,!1,null,"43d3d200",null));$.options.__file="OrderCard.vue";var E=$.exports,T=s("2f62"),G={name:"OrderStatusModal",components:{OrderCard:E},computed:Object(a["a"])({},Object(T["b"])(["selected_sits_list"])),methods:{sitHandler:function(t,e){this.$store.commit("clearSelectedSitsList",e),"book"===e&&this.$store.commit("setModalMessage",{message:"Спасибо за покупку !",activate:!0,timer_out:1500})}}},P=G,R=(s("cc50"),Object(m["a"])(P,S,j,!1,null,"540d902d",null));R.options.__file="OrderStatusModal.vue";var F=R.exports,H={name:"MovieTheatre",components:{Row:M,OrderStatusModal:F},created:function(){this.$store.dispatch("generateFillSitGrid")},computed:Object(a["a"])({},Object(T["b"])(["sits_grid","selected_sits_list"]))},I=H,N=(s("e0ca"),Object(m["a"])(I,r,c,!1,null,"76451535",null));N.options.__file="MovieTheatre.vue";var J=N.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mm-wrap"},[s("div",{staticClass:"mm-inner"},[t._v(t._s(t.message))])])},A=[],U={name:"MessageModal",props:["message"]},q=U,z=(s("1cf9"),Object(m["a"])(q,L,A,!1,null,"36f0b982",null));z.options.__file="MessageModal.vue";var B=z.exports,D={name:"app",components:{MovieTheatre:J,MessageModal:B},computed:Object(a["a"])({},Object(T["b"])(["modal_trigger","modal_message"]))},K=D,Q=(s("034f"),Object(m["a"])(K,n,o,!1,null,null,null));Q.options.__file="App.vue";var V=Q.exports,W=s("75fc");s("20d6"),s("ac6a");i["a"].use(T["a"]);var X=new T["a"].Store({state:{sits_grid:[],selected_sits_list:[],modal_trigger:!1,modal_message:""},mutations:{generateGrid:function(t,e){var s=0,i=0;while(s!==f.rows){t.sits_grid[s]=[];while(i!==f.sits)t.sits_grid[s][i]=f.status_code.free,i++;i=0,s++}f.random_seed.enable&&e.random_seed()},fillRandomSits:function(t,e){var s=[];t.sits_grid.forEach(function(t,e){t.forEach(function(t,i){return s.push({row:e,sit:i})})});while(e){var i=Math.floor(Math.random()*s.length),n=s[i];t.sits_grid[n.row][n.sit]=f.status_code.booked,s.splice(i,1),e--}},setModalMessage:function(t,e){t.modal_message=e.message,t.modal_trigger=e.activate,e.timer_out&&setTimeout(function(){t.modal_trigger=!1},e.timer_out)},clearSelectedSitsList:function(t,e){t.selected_sits_list.forEach(function(s){t.sits_grid[s.row][s.sit]="clean"===e?f.status_code.free:f.status_code.booked,s.update()}),t.selected_sits_list=[]}},actions:{generateFillSitGrid:function(t){t.commit("generateGrid",{random_seed:function(){t.commit("fillRandomSits",f.random_seed.sits_to_seed)}})},toggleSitSelection:function(t,e){var s=t.state.sits_grid[e.row];if(s[e.sit]!==f.status_code.booked){if(s[e.sit]===f.status_code.selected){s[e.sit]=f.status_code.free;var i=t.state.selected_sits_list.findIndex(function(t){return t.sit===e.sit&&t.row===e.row});t.state.selected_sits_list.splice(i,1)}else s[e.sit]=f.status_code.selected,t.state.selected_sits_list.push({sit:e.sit,row:e.row,update:e.update});t.state.selected_sits_list=Object(W["a"])(t.state.selected_sits_list),e.update()}}}});i["a"].config.productionTip=!1,new i["a"]({store:X,render:function(t){return t(V)}}).$mount("#app")},"64a9":function(t,e,s){},7491:function(t,e,s){"use strict";var i=s("5399"),n=s.n(i);n.a},"8d95":function(t,e,s){"use strict";var i=s("df0b"),n=s.n(i);n.a},b334:function(t,e,s){"use strict";var i=s("4871"),n=s.n(i);n.a},b3dc:function(t,e,s){},c198:function(t,e,s){},cc50:function(t,e,s){"use strict";var i=s("b3dc"),n=s.n(i);n.a},ce17:function(t,e,s){},df0b:function(t,e,s){},e0ca:function(t,e,s){"use strict";var i=s("ce17"),n=s.n(i);n.a}});
//# sourceMappingURL=app.5b82be2e.js.map